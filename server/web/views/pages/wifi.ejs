<div class="card">
    <div class="card-header">
        <h2>WiFi Networks</h2>
        <div class="btn-group">
            <button class="btn" onclick="scanWifi()">Scan</button>
            <button class="btn secondary" onclick="location.reload()">â†» Refresh</button>
        </div>
    </div>
    
    <% if (!data.list || data.list.length === 0) { %>
    <p class="empty">Click Scan, wait 2-3 seconds, then click Refresh.</p>
    <% } else { %>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>SSID</th>
                    <th>BSSID</th>
                    <th>Signal</th>
                    <th>Frequency</th>
                </tr>
            </thead>
            <tbody>
                <% data.list.forEach(w => { %>
                <tr>
                    <td><strong><%= w.SSID || '(Hidden)' %></strong></td>
                    <td><code><%= w.BSSID %></code></td>
                    <td>
                        <div class="signal-bar">
                            <div class="signal-level" style="width: <%= Math.min(100, Math.max(0, (w.level + 100) * 2)) %>%"></div>
                        </div>
                        <span><%= w.level %> dBm</span>
                    </td>
                    <td><%= w.frequency %> MHz</td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
    <% } %>
</div>

<script>
function scanWifi() {
    sendCmdNoReload('0xWI', {});
    toast('Scanning WiFi... Click Refresh in 2-3 seconds.', 'info');
}
</script>
